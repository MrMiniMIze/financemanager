#!/usr/bin/env sh
set -eu

ROOT_DIR=$(git rev-parse --show-toplevel)
export PATH="$ROOT_DIR/node_modules/.bin:$PATH"

cd "$ROOT_DIR"

echo "husky - running ci:verify (lint, typecheck, test, build)"

if command -v npm >/dev/null 2>&1; then
  npm run ci:verify
else
  echo "husky - npm not found, aborting push" >&2
  exit 1
fi
